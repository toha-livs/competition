{% extends 'common/base.html' %}

{% load static %}



{% block body %}
    <div class="col-12">
        <div class="row">
            <div class="col-12 my-2" style="padding: 0 8px;">
                <div class="mrow">
                    <div class="col-12">
                        <div class="row">
                            <div class="col-12 p-3 bg-white rounded" style="box-shadow: 0px 2px 12px 0.3px #9e9e9e;">
                                <div class="mrow">
                                    <div class="col-12"><span style="font-size:27px"
                                                              class="float-left text-info">Соревнования</span></div>
                                    <hr class="bg-info" style="width: 100%;">
                                    <div class="col-12">
                                        {% for competition in competitions %}
                                            <a class="badge badge-info" href="{% url 'judge:apparatus-list' competition.id %}">
                                                {{ competition.competition.name }} <br> {{ competition.name }}
                                                <br>
                                                <small>{{ competition.date|date:'d.m H:i' }}</small>
                                            </a>
                                        {% endfor %}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 col-md-6 col-sm-12 p-2 text-center">
                <div class="mrow">
                    <div class="col-12 bg-white rounded p-3" style="box-shadow: 0px 2px 12px 0.3px #9e9e9e;">
                        <div class="row">
                            <div class="col-12">
                                <span style="font-size:23px" class="float-left text-info">Личная информация</span>
                            </div>
                            <div class="col-12">
                                <hr class="bg-info" style="width: 100%;">
                            </div>
                            <div class="col-12">
                                <form method="post">
                                    {% csrf_token %}
                                    <div class="mrow">
                                        <div class="col-12 my-2">
                                            <div class="row">
                                                <div class="col-4">
                                                    <label for="id_last_name">{{ user_ext_form.last_name.label }}</label>
                                                </div>
                                                <div class="col-8">
                                                    <input name="last_name"  class="form-control" id="id_last_name" value="{{ user_ext_form.last_name.value }}">
                                                </div>
                                                {% if user_ext_form.last_name.erros %}
                                                <span class="error-test">{{ user_ext_form.last_name.erros.0 }}</span>
                                                {% endif %}
                                            </div>
                                        </div>
                                        <div class="col-12 my-2">
                                            <div class="row">
                                                <div class="col-4">
                                                    <label for="id_first_name">{{ user_ext_form.first_name.label }}</label>
                                                </div>
                                                <div class="col-8">
                                                    <input name="first_name" class="form-control" id="id_first_name" value="{{ user_ext_form.first_name.value }}">
                                                </div>
                                                {% if user_ext_form.first_name.erros %}
                                                <span class="error-test">{{ user_ext_form.first_name.erros.0 }}</span>
                                                {% endif %}
                                            </div>
                                        </div>
                                        <div class="col-12 my-2">
                                            <div class="row">
                                                <div class="col-4">
                                                    <label for="id_middle_name">{{ user_ext_form.middle_name.label }}</label>
                                                </div>
                                                <div class="col-8">
                                                    <input name="middle_name" class="form-control" id="id_middle_name" value="{{ user_ext_form.middle_name.value }}">
                                                </div>
                                                {% if user_ext_form.middle_name.erros %}
                                                <span class="error-test">{{ user_ext_form.middle_name.erros.0 }}</span>
                                                {% endif %}
                                            </div>
                                        </div>
                                        <div class="col-12 my-2">
                                            <div class="row">
                                                <div class="col-4">
                                                    <label for="id_position">{{ user_ext_form.position.label }}</label>
                                                </div>
                                                <div class="col-8">
                                                    <input name="position" class="form-control" id="id_position" value="{{ user_ext_form.position.value }}">
                                                </div>
                                                {% if user_ext_form.position.erros %}
                                                <span class="error-test">{{ user_ext_form.position.erros.0 }}</span>
                                                {% endif %}
                                            </div>
                                        </div>
                                        <div class="col-12">
                                            <div class="row">
                                                <div class="col-md-6 col-lg-6 col-sm-12 text-center">
                                                    <div class="row">
                                                        <div class="col-12">
                                                            <img onclick="clickPhotoInput()" id="judge_photo" style="height: 100px" src="
                                                            {% if user_ext_form.photo.value %}
                                                            {{ user_ext_form.photo.url }}
                                                            {% else %}
                                                            {% static 'common/images/unknown.png' %}
                                                            {% endif %}
                                                            ">
                                                        </div>
                                                        <div class="col-12">
                                                            <input style="display: none" name="photo" type="file">
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-6 col-lg-6 col-sm-12 text-center" style="padding-top: 40px;">
                                                    <button class="btn btn-warning" type="submit">Сохранить</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 col-md-6 col-sm-12 p-2">
            <div class="mrow">
                <div class="col-12 bg-light rounded p-3" style="box-shadow: 0px 2px 12px 0.3px #9e9e9e;">
                    <div class="row">
                        <div class="col-12">
                            <span style="font-size:23px" class="float-left text-info">История судейства</span>
                        </div>
                        <div class="col-12">
                            <hr class="bg-info" style="width: 100%;">
                        </div>
                        <div class="col-12">
                            <div class="row">
                                {% for judge in judge_history %}
                                    <div class="col-12 my-2" data-id="{{ judge.id }}">
                                        <div class="mrow">
                                            <div class="col-12 shadow rounded p-3">
                                                <div class="row">
                                                    <div class="col-8">
                                                        <span class="text-uppercase">{{ judge.competition.competition.competition_scope.name }}</span>
                                                        <span class="text-muted">
                                                            <small>{{ judge.competition.competition.name }}</small>
                                                        </span>
                                                    </div>
                                                    <div class="col-4 text-right"><span
                                                            class="badge badge-warning">{{ judge.competition.date|date:'d.m.Y' }}</span>
                                                    </div>
                                                    <div class="col-6 text-muted"
                                                         style="text-shadow: 0 0 2px #3d9cb3;">
                                                        <small>{{ judge.get_apparatus_display }}</small>
                                                    </div>
                                                    <div class="col-6 text-right">
                                                        комментарии:
                                                        <span class="badge">{{ judge.comments_count }}</span>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        </div>
    </div>
{% endblock %}


{% block scripts %}

<script>
function clickPhotoInput(){
    $('input[name="photo"]').click()
}
</script>
{% endblock %}