{% extends 'base.html' %}

{% block body %}
<div class="col-12">
    {% for filter in filters %}
    <span class="badge badge-secondary">
        <form id="form-filter-{{forloop.counter}}" method="get">
            <select onchange="$('#form-filter-' + {{forloop.counter}}).submit()" name="{{filter.field_name}}" class="form-control">
                {% for choice in filter.choices %}
                <option value="{{choice.0}}">{{choice.1}}</option>
                {% endfor %}
            </select>
        </form>
    </span>
    {% endfor %}
    {% if mobile %}
        <div class="mrow">
            {% for gymnast in result %}
            <div class="col-12 p-2">
                <div class="mrow">
                    <div class="col-12 bg-light p-2 rounded shadow">
                        <div class="mrow text-center">
                            <div class="col-8">{{gymnast.get_competition_name}}</div>
                            <div class="col-4">
                                <span class="badge badge-info">{{gymnast.score|floatformat}}</span>
                            </div>
                            <hr style="width:95%;border-top: 1px solid #ccc;">
                            <div class="col-4">{{gymnast.get_level_display}}</div>
                            <div class="col-4" onclick="toggleElement('gymnast-result-{{gymnast.pk}}')">
                                <span class="badge badge-dark">&#11015;</span>
                            </div>
                            <div class="col-4">{{gymnast.city}}</div>
                            <div class="col-12" id="gymnast-result-{{gymnast.pk}}" style="display:none;">
                                dawdawdwadwa
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    {% else %}
    <table class="table table-info table-bordered text-center shadow">
        <thead>
        <tr>
            <th>Имя</th>
            <th>Розряд</th>
            <th>Город</th>
            <th>Год</th>
            {% if competition_sex == 1 %}
                <th>ВУ</th>
                <th>Конь</th>
                <th>Кольца</th>
                <th>ОП</th>
                <th>ПП</th>
                <th>ВП</th>
            {% else %}
                <th>ВУ</th>
                <th>Бревно</th>
                <th>РБ</th>
                <th>ОП</th>
            {% endif %}
                <th>Всего</th>
        </tr>
        </thead>
        <tbody>
        {% for gymnast in result %}
        <tr>
            <td>{{ gymnast.get_competition_name }}</td>
            <td>{{ gymnast.get_level_display }}</td>
            <td>{{ gymnast.city }}</td>
            <td>{{ gymnast.user.ext.birthday_date|date:'Y' }}</td>
            <td>{{ gymnast.results.fxm.result|floatformat }}</td>
            <td>{{ gymnast.results.ph.result|floatformat }}</td>
            <td>{{ gymnast.results.rings.result|floatformat }}</td>
            <td>{{ gymnast.results.vtm.result|floatformat }}</td>
            <td>{{ gymnast.results.pb.result|floatformat }}</td>
            <td>{{ gymnast.results.hb.result|floatformat }}</td>
            <td>{{ gymnast.score|floatformat}}</td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
    {% endif %}
</div>
{% endblock %}